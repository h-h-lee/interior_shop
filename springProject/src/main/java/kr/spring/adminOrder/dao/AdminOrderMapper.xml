<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper   
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"   
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">  
<mapper namespace="kr.spring.adminOrder.dao.AdminOrderMapper">
	<!-- 주문 상세 -->
	<select id="selectOrder" parameterType="integer" resultType="adminOrderVO">
		SELECT
  			*
  		FROM sorder o
	  		 JOIN member m
			 ON o.mem_num=m.mem_num
			 LEFT OUTER JOIN member_detail d
			 ON o.mem_num=d.mem_num
			 LEFT OUTER JOIN delivery v
			 ON o.order_no=v.order_no
			 LEFT OUTER JOIN delivery_status s
			 ON v.d_status_num=s.d_status_num
		WHERE o.order_no=#{order_no}
	</select>
	
	<!-- 주문 목록 -->
	<select id="getOrderList" parameterType="map" resultType="adminOrderVO">
		SELECT
			*
		FROM (SELECT a.*, rownum rnum
			  FROM (SELECT
			  		  *
			  		FROM sorder o
				  		 JOIN member m
						 ON o.mem_num=m.mem_num
						 LEFT OUTER JOIN member_detail d
						 ON o.mem_num=d.mem_num
						 LEFT OUTER JOIN delivery v
						 ON o.order_no=v.order_no
						 LEFT OUTER JOIN delivery_status s
						 ON v.d_status_num=s.d_status_num
			  		ORDER BY o.order_no DESC)a)
		<![CDATA[
		WHERE rnum >= #{start} AND rnum <= #{end}
		]]>
	</select>
	
</mapper>







